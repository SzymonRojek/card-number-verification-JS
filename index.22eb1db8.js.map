{"mappings":"AAS0BA,SAASC,cAAc,mBAChBD,SAASC,cACtC,yBAE2BD,SAASC,cAAc","sources":["src/js/main.js"],"sourcesContent":["import {\n  hasCardProperLength,\n  hasOnlyNumbersAndSpaces,\n  isLuhnOK,\n  isStartingNumberCorrect,\n  throwWhenNotString,\n} from \"../helpers\";\n\n{\n  const cardNumberInput = document.querySelector(\".js-numberInput\");\n  const additionalScoreElement = document.querySelector(\n    \".js-additionalMessage\"\n  );\n  const messageErrorsElement = document.querySelector(\".js-errors\");\n\n  const errorNumberReuired = [{ message: \"Card Number is required!\" }];\n\n  const errors = [];\n\n  function findErrors(str) {\n    throwWhenNotString(str);\n\n    const validationErrors = [\n      hasOnlyNumbersAndSpaces(str),\n      hasCardProperLength(str),\n      isLuhnOK(str),\n    ];\n\n    errors =\n      cardNumberInput.value !== \"\"\n        ? validationErrors.filter(({ message }) => message)\n        : errorNumberReuired;\n  }\n\n  function checkCardType(str) {\n    const changeToArr = str.split(\",\").map(Number);\n\n    const mastercard = [51, 52, 53, 54, 55];\n    const visa = [4];\n    const americanExpress = [34, 37];\n\n    switch (changeToArr) {\n      case isStartingNumberCorrect(mastercard, changeToArr) &&\n        !errors.length &&\n        changeToArr:\n        return { message: \"Mastercard\" };\n      case (isStartingNumberCorrect(visa, changeToArr) &&\n        !errors.length &&\n        changeToArr) ||\n        (isStartingNumberCorrect(visa, changeToArr) &&\n          !errors.length &&\n          changeToArr):\n        return { message: \"Visa\" };\n      case isStartingNumberCorrect(americanExpress, changeToArr) &&\n        !errors.length &&\n        changeToArr:\n        return { message: \"American Express\" };\n      default:\n        return { message: \"Not correct!\" };\n    }\n  }\n\n  function renderMessages(value) {\n    const { message } = !errors.length ? checkCardType(value) : \"\";\n\n    const messageErrorsToHTML = errors\n      .map(\n        ({ message }) => `\n          <li class=\"form__list-error\">\n            ${message}\n          </li>\n        `\n      )\n      .join(\"\");\n\n    messageErrorsElement.innerHTML = messageErrorsToHTML;\n    additionalScoreElement.innerHTML = !errors.length ? `${message}` : \"\";\n  }\n\n  function render() {\n    findErrors(cardNumberInput.value);\n    renderMessages(cardNumberInput.value);\n  }\n\n  function onFormSubmit(event) {\n    event.preventDefault();\n\n    render();\n\n    cardNumberInput.value.trim();\n    cardNumberInput.focus();\n  }\n\n  function init() {\n    const form = document.querySelector(\".js-form\");\n\n    form.addEventListener(\"submit\", onFormSubmit);\n  }\n\n  // init();\n}\n"],"names":["document","querySelector"],"version":3,"file":"index.22eb1db8.js.map"}
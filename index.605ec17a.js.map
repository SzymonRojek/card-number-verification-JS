{"mappings":"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","sources":["src/helpers/isLuhnOK.js","src/helpers/hasOnlyNumbers.js","src/helpers/hasCardProperLength.js","src/js/cardsData.js","src/js/main.js","src/helpers/getSingleOrDoubleDigits.js","src/helpers/throwWhenNotString.js","src/helpers/displayFormatNumberOnChange.js"],"sourcesContent":["const errorMessage = {\n  message: \"Luhn's algorithm does not point to the truth!\",\n};\n\nexport default function isLuhnOK(inputValue) {\n  const digitsArrayCollections = [...inputValue].map((num) => Number(num));\n\n  return (\n    digitsArrayCollections\n      .reverse()\n      .map((num, i) => (i % 2 === 1 ? num * 2 : num))\n      .reduce((total, num) => total + (num > 9 ? sumDigits(num) : num), 0) %\n      10 ===\n      0 || errorMessage\n  );\n}\n\nfunction sumDigits(num) {\n  return String(num)\n    .split(\"\")\n    .map((num) => Number(num))\n    .reduce((total, num) => total + num, 0);\n}\n","const errorMessage = { message: \"Please, type only numbers!\" };\n\nexport default function hasOnlyNumbers(inputValue) {\n  return /^\\d+$/.test(inputValue) || errorMessage;\n}\n","const errorMessage = {\n  message: \"Please write a proper length of the numbers!\",\n};\n\nexport default function hasCardProperLength(inputValue, card) {\n  if (!card.length) return errorMessage;\n\n  return (\n    card.find(({ length }) => length.includes(inputValue.length)) ||\n    errorMessage\n  );\n}\n","export const cardsData = [\n  {\n    imgUrl:\n      \"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg\",\n    startingNumbers: [51, 52, 53, 54, 55],\n    length: [16],\n    atr: \"card__logo--mastercard\",\n  },\n  {\n    imgUrl:\n      \"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg\",\n    startingNumbers: [4],\n    length: [13, 16],\n    atr: \"card__logo--visa\",\n  },\n  {\n    imgUrl:\n      \"https://remote-europe.com/sites/default/files/styles/medium_300x300_/public/2020-11/americanexpress.jpg?itok=i_4MMKM0\",\n    startingNumbers: [34, 37],\n    length: [15],\n    atr: \"card__logo--americanExpress\",\n  },\n];\n\nexport default cardsData;\n","import {\n  getSingleOrDoubleDigits,\n  hasCardProperLength,\n  hasOnlyNumbers,\n  isLuhnOK,\n  throwWhenNotString,\n  displayFormatNumbersOnChange,\n} from \"../helpers\";\nimport cardsData from \"./cardsData\";\n\nconst cardsCollection = document.querySelector(\".js-cards__collection\");\nconst cardInformation = document.querySelector(\".js-card__header-information\");\nconst cardLogo = document.querySelector(\".js-card__logo\");\nconst cardNumberInput = document.querySelector(\".js-numberInput\");\nconst messageErrorsElement = document.querySelector(\".js-form__list--errors\");\nconst cardNumberText = document.querySelector(\".js-card__number\");\nconst errorNumberReuired = [{ message: \"Card Number is required!\" }];\n\nfunction init() {\n  const form = document.querySelector(\".js-form\");\n\n  form.addEventListener(\"submit\", onFormSubmit);\n}\n\ncardsData.forEach((card) => {\n  const img = new Image();\n  img.src = card.imgUrl;\n  img.classList.add(card.atr);\n  cardsCollection.append(img);\n});\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  cardNumberInput.focus();\n  cardNumberInput.value.trim();\n\n  const cardType = getCardType(cardNumberInput.value, cardsData);\n  const errors = findErrors(cardNumberInput.value, cardType);\n\n  render(errors, cardType);\n}\n\nfunction render(errors, cardType) {\n  renderMessages(errors, cardType);\n}\n\nfunction renderMessages(errors, cardType) {\n  const FIRST_CARD = 0;\n\n  const messageErrorsToHTML = errors\n    .map(\n      ({ message }) => `\n          <li class=\"form__list-error\">\n            ${message}\n          </li>\n        `\n    )\n    .join(\"\");\n\n  messageErrorsElement.innerHTML = messageErrorsToHTML;\n\n  if (!errors.length) {\n    cardLogo.src = cardType[FIRST_CARD].imgUrl;\n    cardLogo.classList.add(cardType[FIRST_CARD].atr);\n    cardNumberText.classList.add(\"card__number--correct\");\n    cardInformation.textContent = \"Card\";\n  } else {\n    cardLogo.removeAttribute(\"src\");\n\n    cardNumberText.classList.remove(\"card__number--correct\");\n    cardInformation.textContent = \"Card unknown\";\n  }\n}\n\nfunction findErrors(inputValue, selectedCard) {\n  throwWhenNotString(inputValue);\n\n  const validationErrors = [\n    hasOnlyNumbers(inputValue),\n    hasCardProperLength(inputValue, selectedCard),\n    isLuhnOK(inputValue),\n    selectedCard,\n  ];\n\n  return inputValue\n    ? validationErrors.filter(({ message }) => message)\n    : errorNumberReuired;\n}\n\nfunction getCardType(inputValue, cards) {\n  const startingDigitsError = {\n    message: \"The beginning of the bank card number is incorrect!\",\n  };\n\n  const filteredCard =\n    cards &&\n    cards.filter(({ startingNumbers }) => {\n      const cutLength = !!startingNumbers.find((num) => num >>> 0 === num % 10)\n        ? 1\n        : 2;\n\n      const cutNumber = getSingleOrDoubleDigits(inputValue, cutLength);\n\n      return startingNumbers.includes(cutNumber);\n    });\n\n  return filteredCard.length ? filteredCard : startingDigitsError;\n}\n\ncardNumberInput.addEventListener(\"input\", ({ target: value }) => {\n  const defaultFormat = \"0000 0000 0000 0000\";\n  cardNumberText.textContent =\n    value !== \"\"\n      ? displayFormatNumbersOnChange(cardNumberInput.value)\n      : defaultFormat;\n\n  checkAtributesOnInputChange();\n});\n\nfunction checkAtributesOnInputChange() {\n  if (cardLogo.hasAttribute(\"src\")) {\n    cardLogo.removeAttribute(\"src\");\n  }\n\n  if (cardNumberText.classList.contains(\"card__number--correct\")) {\n    cardNumberText.classList.remove(\"card__number--correct\");\n  }\n\n  cardsData.forEach(({ atr }) => {\n    if (cardLogo.classList.contains(atr)) {\n      cardLogo.classList.remove(atr);\n    }\n  });\n}\n\ninit();\n","export default function getSingleOrDoubleDigits(card, lengthToCut) {\n  return Number([...card].slice(0, lengthToCut).join(\"\"));\n}\n","export default function throwWhenNotString(input) {\n  if (typeof input !== \"string\") {\n    throw new Error(\"Given parameter is not a string!\");\n  }\n}\n","export default function displayFormatNumbersOnChange(number) {\n  const formatZeros = \"0000000000000000\";\n\n  let newFormat = \"\";\n  for (let i = 0; i < formatZeros.length; i++) {\n    const el = formatZeros[i];\n\n    newFormat += number[i] || el;\n  }\n\n  const slicedFormatZeros = newFormat.slice(\n    0,\n    -(formatZeros.length - number.length)\n  );\n\n  switch (number.length) {\n    case 1:\n      return slicedFormatZeros.replace(/(\\d{1})/, \"$1\");\n    case 2:\n      return slicedFormatZeros.replace(/(\\d{2})/, \"$1\");\n    case 3:\n      return slicedFormatZeros.replace(/(\\d{3})/, \"$1\");\n    case 4:\n      return slicedFormatZeros.replace(/(\\d{4})/, \"$1\");\n    case 5:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{1})/, \"$1 $2\");\n    case 6:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{2})/, \"$1 $2\");\n    case 7:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{3})/, \"$1 $2\");\n    case 8:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{4})/, \"$1 $2\");\n    case 9:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{4})(\\d{1})/, \"$1 $2 $3\");\n    case 10:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{4})(\\d{2})/, \"$1 $2 $3\");\n    case 11:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{4})(\\d{3})/, \"$1 $2 $3\");\n    case 12:\n      return slicedFormatZeros.replace(/(\\d{4})(\\d{4})(\\d{4})/, \"$1 $2 $3\");\n    case 13:\n      return slicedFormatZeros.replace(\n        /(\\d{4})(\\d{4})(\\d{4})(\\d{1})/,\n        \"$1 $2 $3 $4\"\n      );\n    case 14:\n      return slicedFormatZeros.replace(\n        /(\\d{4})(\\d{4})(\\d{4})(\\d{2})/,\n        \"$1 $2 $3 $4\"\n      );\n    case 15:\n      return slicedFormatZeros.replace(\n        /(\\d{4})(\\d{4})(\\d{4})(\\d{3})/,\n        \"$1 $2 $3 $4\"\n      );\n    default:\n      return newFormat.replace(/(\\d{4})(\\d{4})(\\d{4})(\\d{4})/, \"$1 $2 $3 $4\");\n  }\n}\n"],"names":["$15755e8838aea527$var$errorMessage","message","$15755e8838aea527$export$2e2bcd8739ae039","inputValue","map","num","Number","reverse","i","reduce","total","String","split","$e4cd1173af71596f$var$errorMessage","$e4cd1173af71596f$export$2e2bcd8739ae039","test","$d04161243af1f042$var$errorMessage","$d04161243af1f042$export$2e2bcd8739ae039","card","length","find","includes","$67351c7a818f7a15$export$2e2bcd8739ae039","imgUrl","startingNumbers","atr","$54b47fc030b7b21e$var$cardsCollection","document","querySelector","$54b47fc030b7b21e$var$cardInformation","$54b47fc030b7b21e$var$cardLogo","$54b47fc030b7b21e$var$cardNumberInput","$54b47fc030b7b21e$var$messageErrorsElement","$54b47fc030b7b21e$var$cardNumberText","$54b47fc030b7b21e$var$errorNumberReuired","$54b47fc030b7b21e$var$onFormSubmit","event","preventDefault","focus","value","trim","cardType","cards","startingDigitsError","filteredCard","filter","cutLength","cutNumber","lengthToCut","slice","join","$54b47fc030b7b21e$var$getCardType","errors","FIRST_CARD","messageErrorsToHTML","innerHTML","removeAttribute","classList","remove","textContent","src","add","$54b47fc030b7b21e$var$renderMessages","$54b47fc030b7b21e$var$render","selectedCard","input","Error","$d47c1cd6fee9d87c$export$2e2bcd8739ae039","validationErrors","$54b47fc030b7b21e$var$findErrors","forEach","img","Image","append","addEventListener","target","number","formatZeros","newFormat","el","slicedFormatZeros","replace","$55e40d352d0d27c4$export$2e2bcd8739ae039","hasAttribute","contains","$54b47fc030b7b21e$var$checkAtributesOnInputChange"],"version":3,"file":"index.605ec17a.js.map"}
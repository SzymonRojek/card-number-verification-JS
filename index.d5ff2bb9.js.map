{"mappings":"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","sources":["src/helpers/isLuhnOK.js","src/helpers/hasProperLength.js","src/js/cardsData.js","src/js/main.js","src/helpers/findCardWithStartingNumber.js","src/helpers/throwWhenNotString.js","src/helpers/formatCardNumber.js"],"sourcesContent":["const errorMessage = {\n  message: \"Luhn's algorithm does not point to the truth\",\n};\n\nexport default function isLuhnOK(inputValue) {\n  const digitsArrayCollections = [...inputValue].map((num) => Number(num));\n\n  return (\n    digitsArrayCollections\n      .reverse()\n      .map((num, i) => (i % 2 === 1 ? num * 2 : num))\n      .reduce((total, num) => total + (num > 9 ? sumDigits(num) : num), 0) %\n      10 ===\n      0 || errorMessage\n  );\n}\n\nfunction sumDigits(num) {\n  return String(num)\n    .split(\"\")\n    .map((num) => Number(num))\n    .reduce((total, num) => total + num, 0);\n}\n","const errorMessage = {\n  message: \"Please write a proper length of the numbers\",\n};\n\nexport default function hasProperLength(inputValue, card) {\n  if (!card.length) return errorMessage;\n\n  return (\n    card.find(({ length }) => length.includes(inputValue.length)) ||\n    errorMessage\n  );\n}\n","export const cardsData = [\n  {\n    imgUrl:\n      \"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg\",\n    imgClass: \"card__logo--mastercard\",\n    startingNumbers: [51, 52, 53, 54, 55],\n    length: [16],\n  },\n  {\n    imgUrl:\n      \"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg\",\n    imgClass: \"card__logo--visa\",\n    startingNumbers: [4],\n    length: [13, 16],\n  },\n  {\n    imgUrl:\n      \"https://logosarchive.com/wp-content/uploads/2021/07/American-Express-logo.svg\",\n    imgClass: \"card__logo--americanExpress\",\n    startingNumbers: [34, 37],\n    length: [15],\n  },\n];\n\nexport default cardsData;\n","import {\n  findCardWithStartingNumber,\n  hasProperLength,\n  isLuhnOK,\n  throwWhenNotString,\n  formatCardNumber,\n} from \"../helpers\";\nimport cardsData from \"./cardsData\";\n\nconst cardsCollection = document.querySelector(\".js-cards__collection\");\nconst cardLogo = document.querySelector(\".js-card__logo\");\nconst cardNumberInput = document.querySelector(\".js-numberInput\");\nconst messageErrorsElement = document.querySelector(\".js-form__list--errors\");\nconst cardNumberText = document.querySelector(\".js-card__number\");\n\ninit();\n\nfunction init() {\n  renderImagesCollection();\n\n  const form = document.querySelector(\".js-form\");\n\n  form.addEventListener(\"submit\", onFormSubmit);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  cardNumberInput.focus();\n  cardNumberInput.value.trim();\n\n  const cardType = findCardWithStartingNumber(cardNumberInput.value, cardsData);\n  const errors = findErrors(cardNumberInput.value, cardType);\n\n  render(errors, cardType);\n\n  !errors.length ? (cardNumberInput.value = \"\") : 1;\n}\n\nfunction render(errors, cardType) {\n  renderMessages(errors, cardType);\n}\n\nfunction renderMessages(errors, cardType) {\n  const messageErrorsToHTML = errors\n    .map(\n      ({ message }) => `\n          <li class=\"form__list-error\">\n            ${message}\n          </li>\n        `\n    )\n    .join(\"\");\n\n  messageErrorsElement.innerHTML = messageErrorsToHTML;\n\n  checkAtributesOnClick(errors, cardType);\n}\n\nfunction findErrors(inputValue, selectedCard) {\n  throwWhenNotString(inputValue);\n\n  const errorNumberReuired = [{ message: \"Card Number is required\" }];\n  const startingDigitsError = {\n    message:\n      \"Card number is incorrect - only MasterCard, Visa or American Express are required\",\n  };\n\n  const validationErrors = [\n    hasProperLength(inputValue, selectedCard),\n    isLuhnOK(inputValue),\n    !selectedCard.length ? startingDigitsError : \"\",\n  ];\n\n  return inputValue\n    ? validationErrors.filter(({ message }) => message)\n    : errorNumberReuired;\n}\n\ncardNumberInput.addEventListener(\"input\", (event) => {\n  const defaultFormat = \"0000 0000 0000 0000\";\n  cardNumberText.textContent =\n    event.target.value !== \"\"\n      ? formatCardNumber(cardNumberInput.value)\n      : defaultFormat;\n\n  messageErrorsElement.textContent = event.target.value && \"\";\n\n  checkAtributesOnInputChange();\n});\n\nfunction checkAtributesOnClick(errors, cardType) {\n  const FIRST_CARD = 0;\n\n  if (!errors.length) {\n    cardLogo.src = cardType[FIRST_CARD].imgUrl;\n    cardLogo.classList.add(cardType[FIRST_CARD].imgClass);\n    cardNumberText.classList.add(\"card__number--correct\");\n  } else {\n    cardLogo.removeAttribute(\"src\");\n    cardNumberText.classList.remove(\"card__number--correct\");\n    cardNumberText.classList.add(\"card__number--uncorrect\");\n  }\n}\n\nfunction checkAtributesOnInputChange() {\n  if (cardLogo.hasAttribute(\"src\")) {\n    cardLogo.removeAttribute(\"src\");\n  }\n\n  if (cardNumberText.classList.contains(\"card__number--correct\")) {\n    cardNumberText.classList.remove(\"card__number--correct\");\n  }\n\n  if (cardNumberText.classList.contains(\"card__number--uncorrect\")) {\n    cardNumberText.classList.remove(\"card__number--uncorrect\");\n  }\n\n  cardsData.forEach(({ imgClass }) => {\n    if (cardLogo.classList.contains(imgClass)) {\n      cardLogo.classList.remove(imgClass);\n    }\n  });\n}\n\nfunction renderImagesCollection() {\n  cardsData.forEach(({ imgUrl, imgClass }) => {\n    const img = new Image();\n    img.src = imgUrl;\n    img.classList.add(imgClass);\n    cardsCollection.append(img);\n  });\n}\n","export default function findCardWithStartingNumber(inputValue, cards) {\n  return cards?.filter((card) => {\n    const lengthToCut = card.startingNumbers.length > 1 ? 2 : 1;\n    const numberCut = Number(inputValue.slice(0, lengthToCut));\n\n    return card.startingNumbers.includes(numberCut);\n  });\n}\n","export default function throwWhenNotString(input) {\n  if (typeof input !== \"string\") {\n    throw new Error(\"Given parameter is not a string!\");\n  }\n}\n","export default function formatCardNumber(num) {\n  const chunkNumberReg = /.{1,4}/g;\n\n  return num.match(chunkNumberReg).join(\" \");\n}\n"],"names":["$15755e8838aea527$var$errorMessage","message","$15755e8838aea527$export$2e2bcd8739ae039","inputValue","map","num","Number","reverse","i","reduce","total","String","split","$69c63d70975d82ea$var$errorMessage","$69c63d70975d82ea$export$2e2bcd8739ae039","card","length","find","includes","$67351c7a818f7a15$export$2e2bcd8739ae039","imgUrl","imgClass","startingNumbers","$54b47fc030b7b21e$var$cardsCollection","document","querySelector","$54b47fc030b7b21e$var$cardLogo","$54b47fc030b7b21e$var$cardNumberInput","$54b47fc030b7b21e$var$messageErrorsElement","$54b47fc030b7b21e$var$cardNumberText","$54b47fc030b7b21e$var$onFormSubmit","event","preventDefault","focus","value","trim","cardType","filter","lengthToCut","numberCut","slice","errors","selectedCard","input","Error","$d47c1cd6fee9d87c$export$2e2bcd8739ae039","errorNumberReuired","startingDigitsError","validationErrors","$54b47fc030b7b21e$var$findErrors","messageErrorsToHTML","join","innerHTML","FIRST_CARD","removeAttribute","classList","remove","add","src","$54b47fc030b7b21e$var$checkAtributesOnClick","$54b47fc030b7b21e$var$renderMessages","$54b47fc030b7b21e$var$render","forEach","img","Image","append","addEventListener","$54b47fc030b7b21e$var$init","textContent","target","match","hasAttribute","contains","$54b47fc030b7b21e$var$checkAtributesOnInputChange"],"version":3,"file":"index.d5ff2bb9.js.map"}